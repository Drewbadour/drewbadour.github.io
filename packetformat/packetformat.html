<!DOCTYPE html>
<html>
     <head>
          <meta charset="utf-8">
          <title>Xone Docs - Packet Format</title>
          <link rel="stylesheet" href="../css/markdown.css">
          <link rel="stylesheet" href="../css/default.css">
          <script src="../js/highlight.pack.js"></script>
          <script>hljs.initHighlightingOnLoad();</script>
          <style>
            a.clean
            {
              color:#000000 !important;
              text-decoration:none;
            }
            a.clean:hover
            {
              text-decoration:none;
            }
          </style>
     </head>
<body>



<article class="markdown-body">
<h1>Xbox One Controller Packet Documentation</h1>
<span>Thanks to <a href="https://github.com/quantus">quantus</a> for <a href="https://github.com/quantus/xbox-one-controller-protocol">a lot of the documentation of Xbox One Controller packets</a>.</span>

<h5>Table of Contents</h5>
<ol type="I">
  <li><a href="#PacketsSentToController">Packets Sent To Controller</a></li>
  <ol type="A">
    <li><a href="#To0x01">0x01 - Undocumented Crash</a></li>
    <li><a href="#To0x04">0x04 - Undocumented Start</a></li>
    <li><a href="#To0x05">0x05 - Init Controller</a></li>
    <li><a href="#To0x06">0x06 - Undocumented Crash</a></li>
    <li><a href="#To0x07">0x07 - Load Rumble Effect</a></li>
    <li><a href="#To0x09">0x09 - Activate Rumble Effect</a></li>
  </ol>
  <li><a href="#PacketsSentFromController">Packets Sent From Controller</a></li>
  <ol type="A">
    <li><a href="#From0x01">0x00 - Unknown</a></li>
    <li><a href="#From0x01">0x01 - Unknown</a></li>
    <li><a href="#From0x02">0x02 - Waiting Connection</a></li>
    <li><a href="#From0x03">0x03 - Heartbeat</a></li>
    <li><a href="#From0x04">0x04 - Unknown</a></li>
    <li><a href="#From0x06">0x06 - Unknown</a></li>
    <li><a href="#From0x07">0x07 - Guide Button Packet</a></li>
    <li><a href="#From0x20">0x20 - Button Packet</a></li>
  </ol>
</ol>

<h2><a name="PacketsSentToController" class="clean">Packets Sent To Controller</a></h2>

<span>It is incredibly important that the counter is maintained on packets sent to the controller. For example, the controller will ignore any rumble packets that do not have the correct counter. The very first init packet must have a counter value of 0, from there on out simply add 1 to a uint8_t to maintain the number every time a packet is sent. For example:</span>
<pre><code>uint8_t outCount = 0;
uint8_t xoneInit1[] = { 0x05, 0x20, outCount++, 0x09, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x53 }; // 0
uint8_t xoneInit2[] = { 0x05, 0x20, outCount++, 0x01, 0x00 }; // 1
uint8_t xoneInit3[] = { 0x0a, 0x20, outCount++, 0x03, 0x00, 0x01, 0x14 }; // 2
uint8_t xoneInit4[] = { 0x09, 0x00, outCount++, 0x09, 0x00, 0x0f, 0x00, 0x00, 0x1d, 0x1d, 0xff, 0x00, 0x00 }; // 3</code></pre>
<hr>

<a name="To0x01" class="clean"><h3><code>0x01</code> Undocumented Crash</h3></a>
<pre><code>01:20:00:00:00:00:00:00:00:0E</code></pre>
<span>Crashes the controller. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="To0x04" class="clean"><h3><code>0x04</code> Undocumented Start</h3></a>
<pre><code>04:20
-----
04:20:01:00</code></pre>
<span>Controller lights up, but will not accept data and sends unknown response packets. This packet is using during the init sequence, but its use is undocumented. The first packet is the least data required to use the 0x04 header. The second packet is used in the controller init sequence. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="To0x05" class="clean"><h3><code>0x05</code> Init Controller</h3></a>
<pre><code>05:20
-----
05:20:02:09:06:00:00:00:00:00:00:55:53
05:20:03:01:00</code></pre>
<span>This packet is used to start the controller in a mode in which data can be sent and recieved from the controller. The first packet is the least data required to use the 0x05 header. The second packet is used in the controller init sequence. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="To0x06" class="clean"><h3><code>0x06</code> Undocumented Crash</h3></a>
<pre><code>06:20:00:10:00:08:00:00:38
-----
06:20:00:02:00:02</code></pre>
<span>Crashes the controller. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="To0x07" class="clean"><h3><code>0x07</code> Load Rumble Effect</h3></a>
<pre><code>07:85:a0:20:20:30:20:02:00
-----
[00] 07: Header
[01] 85: At least one of the 0x07 bits must be on
[02] a0: Counter
[03] 20: Left motor / little motor force
[04] 20: Right motor / big motor force
[05] 30: Length
[06] 20: Period
[07] 02: Repeat count. Ex. 0x02 plays effect 1 + 0x02 times
[08] 00: Undocumented</code></pre>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t unknown1;
    uint8_t counter;
    uint8_t littleForce;
    uint8_t bigForce;
    uint8_t length;
    uint8_t period;
    uint8_t repeatCount;
    uint8_t unknown2;
} XBOXONE_LOAD_RUMBLE;
</code></pre>
<span>This packet is used to load a rumble effect for the controller to use. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="To0x09" class="clean"><h3><code>0x09</code> Activate Rumble Effect</h3></a>
<pre><code>09:08:00:02:00:0f:04:04                Short Packet
09:08:00:04:00:0f:04:04                Play Effect
09:08:00:08:00:0f:04:04:20:20:80:00    Continuous Rumble
09:08:00:09:00:0f:04:04:20:20:80       Single Rumble
-----
Constant Header:
[00] 09: Header
[01] 08: 0x20 bit and all bits of 0x07 prevents rumble effect
[02] 00: Undocumented, probably a counter
[03] ??: Substructure (Length)
-----
Short Packet:
[03] 02: Substructure (Length)
[04] 00: Mode
[05] 0f: Rumble mask
     Bit 0: Big motor
     Bit 1: Little motor
     Bit 2: Right trigger
     Bit 3: Left trigger
[06] 04: Left trigger force
[07] 04: Right trigger force
-----
Play Effect:
[03] 04: Substructure (Length)
[04] 00: Mode
[05] 0f: Rumble mask
     Bit 0: Big motor
     Bit 1: Little motor
     Bit 2: Right trigger
     Bit 3: Left trigger
[06] 04: Left trigger force
[07] 04: Right trigger force
-----
Continuous Rumble:
[03] 08: Substructure (Length)
[04] 00: Mode
[05] 0f: Rumble mask
     Bit 0: Big motor
     Bit 1: Little motor
     Bit 2: Right trigger
     Bit 3: Left trigger
[06] 04: Left trigger force
[07] 04: Right trigger force
[08] 20: Left motor / little motor force
[09] 20: Right motor / big motor force
[10] 80: Length of pulse
[11] 00: Period between pulses
-----
Single Rumble:
[03] 08: Substructure (Length)
[04] 00: Mode
[05] 0f: Rumble mask
     Bit 0: Big motor
     Bit 1: Little motor
     Bit 2: Right trigger
     Bit 3: Left trigger
[06] 04: Left trigger force
[07] 04: Right trigger force
[08] 20: Left motor / little motor force
[09] 20: Right motor / big motor force
[10] 80: Length of pulse</code></pre>
<pre><code>typedef struct {
    uint8_t command;
    uint8_t unknown1;
    uint8_t counter;
    uint8_t size;
} XBOXONE_HEADER;
typedef struct {
    XBOXONE_HEADER header;
    uint8_t mode;
    uint8_t rumbleMask;
    uint8_t trigL, trigR;
} XBOXONE_SHORT_RUMBLE;
typedef struct {
    XBOXONE_HEADER header;
    uint8_t mode;
    uint8_t rumbleMask;
    uint8_t trigL, trigR;
} XBOXONE_PLAY_RUMBLE;
typedef struct {
    XBOXONE_HEADER header;
    uint8_t mode;
    uint8_t rumbleMask;
    uint8_t trigL, trigR;
    uint8_t little, big;
    uint8_t length;
} XBOXONE_SINGLE_RUMBLE;
typedef struct {
    XBOXONE_HEADER header;
    uint8_t mode;
    uint8_t rumbleMask;
    uint8_t trigL, trigR;
    uint8_t little, big;
    uint8_t length;
    uint8_t period;
} XBOXONE_CONTINUOUS_RUMBLE;
</code></pre>
<span>This packet is used to create an immediate rumble effect for the controller to use. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<h2><a name="PacketsSentFromController" class="clean">Packets Sent From Controller</a></h2>

<a name="From0x00" class="clean"><h3><code>0x00</code> Unknown</h3></a>
<span>Unknown. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x01" class="clean"><h3><code>0x01</code> Unknown</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t const20;
    uint8_t constFF;
    uint8_t const09
    uint8_t const0;
    uint8_t query1;
    uint8_t query2;
    uint16_t unknown1;
    uint32_t unknown2;
} XBOXONE_UNKNOWN_OUT_01;
</code></pre>
<span>Unknown. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x02" class="clean"><h3><code>0x02</code> Waiting Connection</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t const20;
    uint16_t id;
} XBOXONE_AWAITING_CONNECTION;
</code></pre>
<span>This is sent periodically when the controller hasn't been started yet. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x03" class="clean"><h3><code>0x03</code> Heartbeat</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t const20;
    uint8_t counter;
    uint8_t size;

    uint8_t const80;
    uint8_t dummy1;
    uint8_t dummy2;
    uint8_t dummy3;
} XBOXONE_HEARTBEAT;
</code></pre>
<span>This is sent periodically after the controller has been started. It probably holds important data for wireless controllers. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x04" class="clean"><h3><code>0x04</code> Unknown</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    
    uint8_t unknown[0x3f];
} XBOXONE_UNKNOWN_OUT_04;
</code></pre>
<span>Unknown. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x06" class="clean"><h3><code>0x06</code> Unknown</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t const30;
    uint8_t counter;
    uint8_t size;
    
    uint8_t const00;
    uint8_t unknown[5];
} XBOXONE_UNKNOWN_OUT_06;
</code></pre>
<span>Unknown. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x07" class="clean"><h3><code>0x07</code> Guide Button Packet</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t const20;
    uint8_t counter;
    uint8_t size;
    
    uint8_t guideButtonState;
    uint8_t const5B;
} XBOXONE_GUIDE_REPORT;
</code></pre>
<span>This packet is sent whenever the guide button is pressed. Probably has more implications for wireless controllers. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

<a name="From0x20" class="clean"><h3><code>0x20</code> Button Packet</h3></a>
<pre><code>typedef struct {
    uint8_t packetType;
    uint8_t reserved1;
    uint8_t counter;
    uint8_t size; // 0x0e
    
    uint16_t buttons;
    uint16_t trigL, trigR;
    int16_t leftX, leftY, rightX, rightY;
} XBOXONE_BUTTON_REPORT;
typedef struct {
    uint8_t packetType;
    uint8_t reserved1;
    uint8_t counter;
    uint8_t size; // 0x1d
    
    uint16_t buttons;
    uint16_t trigL, trigR;
    int16_t leftX, leftY, rightX, rightY;

    uint16_t true_buttons;
    uint16_t true_trigL, true_trigR;
    int16_t true_leftX, true_leftY, true_rightX, true_rightY;
    uint8_t paddle;
} XBOXONE_ELITE_BUTTON_REPORT;
typedef enum {
    XONE_SYNC           = 0x0001, // Bit 00
    XONE_MENU           = 0x0004, // Bit 02
    XONE_VIEW           = 0x0008, // Bit 03
    XONE_A              = 0x0010, // Bit 04
    XONE_B              = 0x0020, // Bit 05
    XONE_X              = 0x0040, // Bit 06
    XONE_Y              = 0x0080, // Bit 07
    XONE_DPAD_UP        = 0x0100, // Bit 08
    XONE_DPAD_DOWN      = 0x0200, // Bit 09
    XONE_DPAD_LEFT      = 0x0400, // Bit 10
    XONE_DPAD_RIGHT     = 0x0800, // Bit 11
    XONE_LEFT_SHOULDER  = 0x1000, // Bit 12
    XONE_RIGHT_SHOULDER = 0x2000, // Bit 13
    XONE_LEFT_THUMB     = 0x4000, // Bit 14
    XONE_RIGHT_THUMB    = 0x8000, // Bit 15
} XBOXONE_BUTTONS;
typedef enum {
    XONE_PADDLE_UPPER_LEFT      = 0x0001, // Bit 00
    XONE_PADDLE_UPPER_RIGHT     = 0x0002, // Bit 01
    XONE_PADDLE_LOWER_LEFT      = 0x0004, // Bit 02
    XONE_PADDLE_LOWER_RIGHT     = 0x0008, // Bit 03
    XONE_PADDLE_PRESET_NUM      = 0x0010, // Bit 04
} XBOXONE_ELITE_PADDLES;
</code></pre>
<span>The button packet the controller sends every time there is a change in the state of the controller. The Elite controller has a slightly larger and more complicated packet. The <code>true_</code> portion of the Elite packet is what buttons are truly being pressed. If buttons are mapped differently using the controller tool, the real button pressed will appear in the <code>true_</code> section, but it will report as the binding in the normal <code>buttons</code> packet. More documentation available at <a href="https://github.com/quantus/xbox-one-controller-protocol">quantus' repository.</a></span>
<hr>

</article>
</body>
</html>